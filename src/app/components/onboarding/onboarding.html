<!-- src/app/components/onboarding/onboarding.component.html -->
<div class="onboarding-container">
  <div class="onboarding-card">
    <!-- Header Section -->
    <div class="card-header">
      <div class="logo-section">
        <div class="logo-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="20" y1="8" x2="20" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="23" y1="11" x2="17" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="header-text">
          <h2>Employee Onboarding</h2>
          <p class="company-name">Royal Associates Group</p>
        </div>
      </div>
      <div class="progress-indicator">
        <div class="progress-bar">
          <div class="progress-fill" [style.width]="getProgressPercentage() + '%'"></div>
        </div>
        <span class="progress-text">{{ getProgressPercentage() }}% Complete</span>
      </div>
    </div>

    <!-- Main Form -->
    <form [formGroup]="onboardingForm" (ngSubmit)="onSubmit()" class="onboarding-form">
      
      <!-- Basic Information Section -->
      <div class="section" [class.completed]="isBasicInfoCompleted()">
        <div class="section-header">
          <div class="section-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Basic Information</h3>
          <div class="section-status" *ngIf="isBasicInfoCompleted()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>

        <div class="form-content">
          <!-- Name and Serial Number Row -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">
                <span>Full Name</span>
                <span class="required">*</span>
              </label>
              <div class="input-wrapper">
                <div class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <input 
                  type="text" 
                  formControlName="name" 
                  class="form-input" 
                  [class.error]="onboardingForm.get('name')?.invalid && onboardingForm.get('name')?.touched"
                  [class.valid]="onboardingForm.get('name')?.valid && onboardingForm.get('name')?.touched"
                  placeholder="Enter your full name">
                <div class="input-status" *ngIf="onboardingForm.get('name')?.valid && onboardingForm.get('name')?.touched">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="error-messages">
                <small *ngIf="onboardingForm.get('name')?.invalid && onboardingForm.get('name')?.touched" class="error-text">
                  <span *ngIf="onboardingForm.get('name')?.errors?.['required']">Name is required</span>
                  <span *ngIf="onboardingForm.get('name')?.errors?.['minlength']">Name must be at least 2 characters</span>
                </small>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                <span>Serial Number</span>
                <span class="required">*</span>
              </label>
              <div class="input-wrapper">
                <div class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <input 
                  type="text" 
                  formControlName="slNo" 
                  class="form-input" 
                  [class.error]="onboardingForm.get('slNo')?.invalid && onboardingForm.get('slNo')?.touched"
                  [class.valid]="onboardingForm.get('slNo')?.valid && onboardingForm.get('slNo')?.touched"
                  placeholder="Enter employee serial number">
                <div class="input-status" *ngIf="onboardingForm.get('slNo')?.valid && onboardingForm.get('slNo')?.touched">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="error-messages">
                <small *ngIf="onboardingForm.get('slNo')?.invalid && onboardingForm.get('slNo')?.touched" class="error-text">
                  <span *ngIf="onboardingForm.get('slNo')?.errors?.['required']">Serial number is required</span>
                  <span *ngIf="onboardingForm.get('slNo')?.errors?.['minlength']">Serial number must be at least 3 characters</span>
                </small>
              </div>
            </div>
          </div>

          <!-- Address Field -->
          <div class="form-group">
            <label class="form-label">
              <span>Address</span>
              <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <div class="input-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 10C21 17 12 23 12 23S3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.3639 3.63604C20.0518 4.32387 21 7.61305 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <textarea 
                formControlName="address" 
                class="form-textarea" 
                rows="3"
                [class.error]="onboardingForm.get('address')?.invalid && onboardingForm.get('address')?.touched"
                [class.valid]="onboardingForm.get('address')?.valid && onboardingForm.get('address')?.touched"
                placeholder="Enter your complete address"></textarea>
              <div class="input-status" *ngIf="onboardingForm.get('address')?.valid && onboardingForm.get('address')?.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="error-messages">
              <small *ngIf="onboardingForm.get('address')?.invalid && onboardingForm.get('address')?.touched" class="error-text">
                <span *ngIf="onboardingForm.get('address')?.errors?.['required']">Address is required</span>
                <span *ngIf="onboardingForm.get('address')?.errors?.['minlength']">Address must be at least 10 characters</span>
              </small>
            </div>
          </div>

          <!-- Mobile and Email Row -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">
                <span>Mobile Number</span>
                <span class="required">*</span>
              </label>
              <div class="input-wrapper">
                <div class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9845 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.59524 1.99522 8.06572 2.16708 8.43369 2.48353C8.80166 2.79999 9.04201 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97366 7.27691 9.8939 7.65088C9.81415 8.02485 9.62886 8.36811 9.35999 8.64L8.08999 9.91C9.51355 12.4135 11.5865 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9751 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0555 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <input 
                  type="tel" 
                  formControlName="mobileNumber" 
                  class="form-input" 
                  [class.error]="onboardingForm.get('mobileNumber')?.invalid && onboardingForm.get('mobileNumber')?.touched"
                  [class.valid]="onboardingForm.get('mobileNumber')?.valid && onboardingForm.get('mobileNumber')?.touched"
                  placeholder="Enter mobile number">
                <div class="input-status" *ngIf="onboardingForm.get('mobileNumber')?.valid && onboardingForm.get('mobileNumber')?.touched">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="error-messages">
                <small *ngIf="onboardingForm.get('mobileNumber')?.errors?.['required'] && onboardingForm.get('mobileNumber')?.touched" class="error-text">
                  Mobile number is required
                </small>
                <small *ngIf="onboardingForm.get('mobileNumber')?.errors?.['pattern'] && onboardingForm.get('mobileNumber')?.touched" class="error-text">
                  Please enter a valid mobile number
                </small>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                <span>Email ID</span>
                <span class="required">*</span>
              </label>
              <div class="input-wrapper">
                <div class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <input 
                  type="email" 
                  formControlName="emailId" 
                  class="form-input" 
                  [class.error]="onboardingForm.get('emailId')?.invalid && onboardingForm.get('emailId')?.touched"
                  [class.valid]="onboardingForm.get('emailId')?.valid && onboardingForm.get('emailId')?.touched"
                  placeholder="Enter email address">
                <div class="input-status" *ngIf="onboardingForm.get('emailId')?.valid && onboardingForm.get('emailId')?.touched">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="error-messages">
                <small *ngIf="onboardingForm.get('emailId')?.errors?.['required'] && onboardingForm.get('emailId')?.touched" class="error-text">
                  Email is required
                </small>
                <small *ngIf="onboardingForm.get('emailId')?.errors?.['email'] && onboardingForm.get('emailId')?.touched" class="error-text">
                  Please enter a valid email address
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Biometric Information Section (Optional) -->
      <div class="section" [class.completed]="isBiometricCompleted()">
        <div class="section-header">
          <div class="section-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 10C13.1046 10 14 9.10457 14 8C14 6.89543 13.1046 6 12 6C10.8954 6 10 6.89543 10 8C10 9.10457 10.8954 10 12 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 1V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 21V23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M4.22 4.22L5.64 5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18.36 18.36L19.78 19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 12H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 12H23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M4.22 19.78L5.64 18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Biometric Information <span style="font-size: 0.875rem; font-weight: 400; opacity: 0.7;">(Optional)</span></h3>
          <div class="section-status" *ngIf="isBiometricCompleted()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>

        <div class="biometric-row">
          <!-- Signature Section -->
          <div class="biometric-group">
            <div class="biometric-header">
              <label class="form-label">Digital Signature <span style="font-size: 0.75rem; opacity: 0.7;">(Optional)</span></label>
              <div class="biometric-status" [class.completed]="hasSignature">
                <svg *ngIf="hasSignature" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="signature-container">
              <div class="signature-pad" [class.has-signature]="hasSignature">
                <canvas 
                  #signatureCanvas 
                  class="signature-canvas"
                  (mousedown)="startDrawing($event)"
                  (mousemove)="draw($event)"
                  (mouseup)="stopDrawing()"
                  (mouseleave)="stopDrawing()"
                  width="400"
                  height="200">
                </canvas>
                <div class="signature-overlay" *ngIf="!hasSignature">
                  <div class="signature-instructions">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M17 3C17.5304 3 18.0391 3.21071 18.4142 3.58579C18.7893 3.96086 19 4.46957 19 5V19C19 19.5304 18.7893 20.0391 18.4142 20.4142C18.0391 20.7893 17.5304 21 17 21H7C6.46957 21 5.96086 20.7893 5.58579 20.4142C5.21071 20.0391 5 19.5304 5 19V5C5 4.46957 5.21071 3.96086 5.58579 3.58579C5.96086 3.21071 6.46957 3 7 3H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M8 8L16 16M16 8L8 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Click and drag to create your signature</span>
                  </div>
                </div>
              </div>
              <div class="signature-controls">
                <button type="button" class="btn btn-secondary btn-sm" (click)="clearSignature()">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="3,6 5,6 21,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Clear Signature
                </button>
              </div>
            </div>
          </div>

          <!-- Fingerprint Section -->
          <div class="biometric-group">
            <div class="biometric-header">
              <label class="form-label">Fingerprint Scan <span style="font-size: 0.75rem; opacity: 0.7;">(Optional)</span></label>
              <div class="biometric-status" [class.completed]="fingerprintCaptured">
                <svg *ngIf="fingerprintCaptured" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="fingerprint-container">
              <div class="fingerprint-scanner" [class.scanning]="fingerprintLoading" [class.captured]="fingerprintCaptured">
                <div class="fingerprint-icon">
                  <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 12C2 13.3132 2.25866 14.6136 2.7612 15.8268C3.26375 17.0401 4.00035 18.1425 4.92893 19.0711C5.85752 19.9997 6.95991 20.7362 8.17317 21.2388C9.38642 21.7413 10.6868 22 12 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 16.5C21 14.01 20.21 11.74 18.83 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M13 20.9999C13 18.7905 12.1045 16.6712 10.5104 15.0771C8.91635 13.483 6.79698 12.5875 4.58759 12.5875" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 17C9 15.6739 8.47322 14.4021 7.53553 13.4645C6.59785 12.5268 5.32608 12 4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="10" r="8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="scan-animation" [class.active]="fingerprintLoading"></div>
              </div>
              <button 
                type="button" 
                class="btn btn-primary fingerprint-btn" 
                (click)="captureFingerprint()"
                [disabled]="fingerprintLoading || fingerprintCaptured"
                [class.loading]="fingerprintLoading"
                [class.success]="fingerprintCaptured">
                <span *ngIf="!fingerprintLoading && !fingerprintCaptured" class="btn-content">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 10C13.1046 10 14 9.10457 14 8C14 6.89543 13.1046 6 12 6C10.8954 6 10 6.89543 10 8C10 9.10457 10.8954 10 12 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Scan Fingerprint
                </span>
                <span *ngIf="fingerprintLoading" class="btn-loading">
                  <div class="spinner"></div>
                  Scanning...
                </span>
                <span *ngIf="fingerprintCaptured" class="btn-success">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Captured Successfully
                </span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Photo Capture Section (Optional) -->
      <div class="section" [class.completed]="photoCaptured">
        <div class="section-header">
          <div class="section-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 3H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3>Photo Capture <span style="font-size: 0.875rem; font-weight: 400; opacity: 0.7;">(Optional)</span></h3>
          <div class="section-status" *ngIf="photoCaptured">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>

        <div class="photo-capture-section">
          <!-- Camera Container -->
          <div class="camera-container" *ngIf="!photoCaptured">
            <div class="camera-frame">
              <video 
                #videoElement 
                class="camera-preview" 
                [style.display]="cameraActive ? 'block' : 'none'"
                autoplay 
                playsinline>
              </video>
              <div class="camera-placeholder" [style.display]="!cameraActive ? 'flex' : 'none'">
                <div class="camera-icon">
                  <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 3H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <p>Click "Start Camera" to begin photo capture</p>
              </div>
              <div class="camera-overlay" *ngIf="cameraActive">
                <div class="camera-guide">
                  <div class="guide-frame"></div>
                </div>
              </div>
            </div>
            <canvas #photoCanvas style="display: none;"></canvas>
            
            <div class="camera-controls">
              <button 
                type="button" 
                class="btn btn-primary" 
                (click)="startCamera()" 
                *ngIf="!cameraActive">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polygon points="10,8 16,12 10,16 10,8" fill="currentColor"/>
                </svg>
                Start Camera
              </button>
              
              <div class="camera-active-controls" *ngIf="cameraActive">
                <button 
                  type="button" 
                  class="btn btn-success capture-btn" 
                  (click)="capturePhoto()">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Capture Photo
                </button>
                <button 
                  type="button" 
                  class="btn btn-secondary" 
                  (click)="stopCamera()">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="6" y="6" width="12" height="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Stop Camera
                </button>
              </div>
            </div>
          </div>

          <!-- Photo Preview -->
          <div class="photo-preview" *ngIf="photoCaptured">
            <div class="photo-frame">
              <img [src]="capturedPhotoUrl" alt="Captured photo" class="captured-photo">
              <div class="photo-overlay">
                <div class="photo-success">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
            <div class="photo-controls">
              <button type="button" class="btn btn-secondary" (click)="retakePhoto()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <polyline points="23,4 23,10 17,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M20.49 15C19.9828 16.8399 18.8927 18.4725 17.3833 19.6281C15.8738 20.7837 14.0331 21.3985 12.134 21.3882C10.2349 21.3779 8.40140 20.7431 6.90465 19.5723C5.40791 18.4016 4.33302 16.7581 3.84194 14.9003C3.35086 13.0425 3.46813 11.0652 4.17731 9.27099C4.88649 7.47679 6.15130 5.94692 7.80010 4.91379C9.44890 3.88066 11.3983 3.39253 13.3499 3.51946C15.3015 3.64639 17.1572 4.38346 18.64 5.62L23 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Retake Photo
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Alert Messages -->
      <div class="alerts">
        <div *ngIf="errorMessage" class="alert alert-error">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          {{ errorMessage }}
        </div>

        <div *ngIf="successMessage" class="alert alert-success">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          {{ successMessage }}
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary btn-large" routerLink="/dashboard">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn btn-primary btn-large" 
          [disabled]="!isFormValid || loading"
          [class.loading]="loading">
          <span *ngIf="!loading" class="btn-content">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="17,21 17,13 7,13 7,21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="7,3 7,8 15,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Save Employee Data
          </span>
          <span *ngIf="loading" class="btn-loading">
            <div class="spinner"></div>
            Saving...
          </span>
        </button>
      </div>
    </form>
  </div>
</div>